<div class="card animate-fade-in">
  <h2 class="mb-4 text-2xl font-bold text-green-300">ğŸ“ Min Todo-liste</h2>

  <!-- Input-skjema -->
  <form (submit)="addTask()" class="grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-5">
    <input
      [(ngModel)]="newTask"
      name="task"
      required
      placeholder="Hva skal gjÃ¸res?"
      class="w-full col-span-1 input sm:col-span-2"
    />
    <input [(ngModel)]="newDueDate" name="dueDate" type="date" class="w-full input" />
    <input [(ngModel)]="newDueTime" name="dueTime" type="time" class="w-full input" />
    <select [(ngModel)]="newCategory" name="category" class="w-full text-white input bg-slate-800">
      <option value="" disabled selected>Velg kategori</option>
      <option *ngFor="let c of categories" [value]="c" class="text-white bg-slate-800">
        {{ c }}
      </option>
      <option value="custom" class="text-white bg-slate-800">Egendefinert...</option>
    </select>
    <input
      *ngIf="newCategory === 'custom'"
      [(ngModel)]="customCategory"
      name="customCategory"
      placeholder="Egen kategori"
      class="w-full text-white placeholder-gray-400 bg-gray-800 border border-gray-600 appearance-none input focus:ring-2 focus:ring-green-400"
    />
    <button
      type="submit"
      class="w-full col-span-1 mt-2 btn btn-primary sm:col-span-2 lg:col-span-5"
    >
      â• Legg til
    </button>
  </form>

  <!-- Sorteringsvalg -->
  <div class="flex items-center mt-4 space-x-2">
    <label for="sort" class="text-sm text-gray-200">Sorter etter:</label>
    <select id="sort" [(ngModel)]="sortBy" name="sortBy" class="text-white input bg-slate-800">
      <option value="date" class="text-white bg-slate-800">Dato</option>
      <option value="text" class="text-white bg-slate-800">Navn</option>
      <option value="category" class="text-white bg-slate-800">Kategori</option>
    </select>
  </div>

  <!-- Oppgavelister -->
  <div class="grid grid-cols-1 gap-6 mt-6 md:grid-cols-2">
    <!-- Aktive -->
    <div>
      <h3 class="mb-2 text-lg font-semibold text-green-300 uppercase">Aktive</h3>
      <ul class="space-y-2">
        <li
          *ngFor="let task of activeTasks; trackBy: trackById"
          class="flex flex-col p-3 rounded-lg bg-slate-700"
        >
          <div class="flex items-center justify-between">
            <label class="flex items-center gap-3">
              <input
                type="checkbox"
                [checked]="task.done"
                (change)="toggle(task)"
                class="accent-green-300"
              />
              <span class="text-white">{{ task.text }}</span>
            </label>
            <button (click)="remove(task)" class="btn btn-danger">âŒ</button>
          </div>
          <div class="flex items-center mt-1 space-x-4 text-xs text-white/70 ml-7">
            <span *ngIf="task.dueDate">ğŸ“… {{ task.dueDate }}</span>
            <span *ngIf="task.dueTime">â° {{ task.dueTime }}</span>
            <span *ngIf="task.category" class="tag">ğŸ—‚ï¸ {{ task.category }}</span>
          </div>
        </li>
      </ul>
    </div>

    <!-- Ferdige -->
    <div>
      <h3 class="mb-2 text-lg font-semibold text-green-300 uppercase">Ferdige</h3>
      <ul class="space-y-2">
        <li
          *ngFor="let task of completedTasks; trackBy: trackById"
          class="flex flex-col p-3 rounded-lg bg-slate-600 opacity-70"
        >
          <div class="flex items-center justify-between">
            <label class="flex items-center gap-3">
              <input
                type="checkbox"
                [checked]="task.done"
                (change)="toggle(task)"
                class="accent-green-300"
              />
              <span class="text-white line-through">{{ task.text }}</span>
            </label>
            <button (click)="remove(task)" class="btn btn-danger">âŒ</button>
          </div>
          <div class="flex items-center mt-1 space-x-4 text-xs text-white/70 ml-7">
            <span *ngIf="task.dueDate">ğŸ“… {{ task.dueDate }}</span>
            <span *ngIf="task.dueTime">â° {{ task.dueTime }}</span>
            <span *ngIf="task.category" class="tag">ğŸ—‚ï¸ {{ task.category }}</span>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<!--
  SAMMENDRAG (hva denne templaten gjÃ¸r)
  ----------------------------------------------------
  - Viser et skjema for Ã¥ registrere ny oppgave:
      â€¢ newTask (tekst), newDueDate (dato), newDueTime (tid), newCategory (valg), customCategory (tekst ved 'custom').
      â€¢ Bruker [(ngModel)] for toveis-binding. name-attributt er pÃ¥krevd for ngModel i form.
      â€¢ (submit)="addTask()" kaller komponentmetoden som oppretter ny Task.
        Tips: vurder (ngSubmit) pÃ¥ <form> for mer "Angular-riktig" hÃ¥ndtering.
  - Viser to lister:
      â€¢ Aktive (activeTasks) og Ferdige (completedTasks), hver rendret med *ngFor og trackById for ytelse.
      â€¢ toggle(task) flipper done; remove(task) sletter.
      â€¢ Meta-informasjon (dueDate, dueTime, category) vises kun nÃ¥r den finnes med *ngIf.
  - Tailwind/utility-klasser brukes for layout/typografi/farger; egne helper-klasser (card, btn, tag) kan vÃ¦re definert i din CSS.
-->
